<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OfferIQ - First Financial</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ========================================
         HEADER - Navigation & User Info
    ======================================== -->
    <header class="header">
        <div class="header-content">
            <!-- Logo Section -->
            <div class="logo-section">
                <div class="company-label">
                    <svg class="bank-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7v2h20V7L12 2zm0 2.5L18 7H6l6-2.5zM4 11v8h3v-8H4zm6.5 0v8h3v-8h-3zM17 11v8h3v-8h-3zM2 21h20v2H2v-2z"/>
                    </svg>
                    <span>First Financial</span>
                </div>
                <h1 class="logo">OfferIQ</h1>
            </div>

            <!-- Navigation Tabs -->
            <nav class="main-nav">
                <a href="#" class="nav-link" data-section="home">Home</a>
                <a href="#" class="nav-link active" data-section="campaign-studio">Campaign Studio</a>
            </nav>

            <!-- User Section -->
            <div class="user-section">
                <div class="user-info">
                    <span class="user-greeting">Hello, John Smith</span>
                    <span class="last-login">Last log in Jul 4, 2025 at 10:28 PM EST</span>
                </div>
                <div class="user-avatar">
                    <img src="https://ui-avatars.com/api/?name=John+Smith&background=random" alt="User Avatar">
                </div>
                <button class="logout-btn" title="Logout">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- ========================================
         MAIN CONTENT
    ======================================== -->
    <main class="main-content">
        <!-- Campaign Studio Section -->
        <section id="campaign-studio" class="section active">
            <h2 class="page-title">Campaign Studio</h2>

            <div class="campaign-container">
                <!-- New Campaign Card -->
                <div class="campaign-card new-campaign">
                    <h3>New Campaign</h3>
                    <div class="campaign-card-content">
                        <div class="persona-icon" id="start-persona-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                            </svg>
                        </div>
                        <p class="card-label">Build by Pre-Trained Personas</p>
                        <a href="#" class="start-link" id="start-persona-btn">Start Here</a>
                    </div>
                </div>

                <!-- Edit Active Campaigns Card -->
                <div class="campaign-card edit-campaigns">
                    <div class="card-header">
                        <h3>Edit Active Campaigns</h3>
                        <div class="search-box">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            <input type="text" placeholder="Search" id="campaign-search">
                        </div>
                    </div>
                    <div class="campaigns-list" id="campaigns-list">
                        <div class="empty-state">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                            </svg>
                            <p>There is no data to display</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Home Section -->
        <section id="home" class="section">
            <h2 class="page-title">Dashboard Overview</h2>

            <!-- Metrics Cards -->
            <div class="metrics-grid">
                <div class="metric-card" data-metric="campaigns">
                    <div class="metric-icon blue">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <span class="metric-value">12</span>
                        <span class="metric-label">Active Campaigns</span>
                    </div>
                </div>

                <div class="metric-card" data-metric="reach">
                    <div class="metric-icon green">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <span class="metric-value">35,420</span>
                        <span class="metric-label">Total Reach</span>
                    </div>
                </div>

                <div class="metric-card" data-metric="conversion">
                    <div class="metric-icon orange">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <span class="metric-value">68%</span>
                        <span class="metric-label">Avg. Conversion</span>
                    </div>
                </div>

                <div class="metric-card" data-metric="revenue">
                    <div class="metric-icon purple">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/>
                        </svg>
                    </div>
                    <div class="metric-info">
                        <span class="metric-value">$2.4M</span>
                        <span class="metric-label">Projected Revenue</span>
                    </div>
                </div>
            </div>

            <!-- Recent Activity Table -->
            <div class="table-section">
                <h3>Recent Campaign Performance</h3>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Campaign Name</th>
                            <th>Persona</th>
                            <th>Status</th>
                            <th>Reach</th>
                            <th>Conversion</th>
                            <th>Revenue</th>
                        </tr>
                    </thead>
                    <tbody id="campaign-table-body">
                        <!-- Data populated by JS -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Build Persona Section (Modal/Wizard) -->
        <section id="persona-builder" class="section persona-wizard">
            <h2 class="page-title">Build by Pre-Trained Personas</h2>

            <div class="wizard-container">
                <!-- Stepper -->
                <div class="stepper">
                    <div class="step active" data-step="1">
                        <span class="step-number">1</span>
                        <span class="step-label">Explore Persona</span>
                    </div>
                    <div class="step-connector"></div>
                    <div class="step" data-step="2">
                        <span class="step-number">2</span>
                        <span class="step-label">Review Products</span>
                    </div>
                </div>

                <!-- Step 1: Explore Persona -->
                <div class="wizard-step" id="step-1">
                    <p class="step-description">Explore all the different Pre-Trained Personas to start your campaign.</p>

                    <div class="persona-selector">
                        <button class="persona-tag active" data-persona="home-owners">Home Owners <span class="remove-tag">&times;</span></button>
                        <button class="persona-tag" data-persona="small-business">Small Business</button>
                        <button class="persona-tag" data-persona="young-professionals">Young Professionals</button>
                        <button class="persona-tag" data-persona="retirees">Retirees</button>
                    </div>

                    <div class="persona-details-grid">
                        <!-- Left Column -->
                        <div class="persona-details-column">
                            <!-- Persona Info Card -->
                            <div class="persona-info-card">
                                <h4>Persona: <span id="persona-name">Home Owners</span></h4>
                                <p id="persona-description">Established individuals who prioritize stability and long-term financial planning. They focus on managing mortgage obligations while building equity and maintaining lifestyle needs.</p>
                            </div>

                            <!-- Map Card -->
                            <div class="map-card" style="position: relative;">
                                <h4>Spend by Location</h4>
                                <div class="usa-map" id="usa-map">
                                    <!-- SVG Map will be inserted here -->
                                </div>

                                <!-- Map Control Panel -->
                                <div class="map-control-panel">
                                    <!-- Toggle Button (+) -->
                                    <button class="map-control-btn map-control-toggle" id="map-ctrl-toggle" title="Toggle Controls">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                                        </svg>
                                    </button>

                                    <!-- Home Button -->
                                    <button class="map-control-btn map-control-sub" id="map-ctrl-home" title="Reset Zoom">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
                                        </svg>
                                    </button>

                                    <!-- Legend Toggle Button -->
                                    <button class="map-control-btn map-control-sub active" id="map-ctrl-legend" title="Toggle Legend">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                            <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="persona-details-column">
                            <div class="comparison-wrapper">
                                <!-- Persona Characteristics -->
                                <div class="characteristics-card" id="usa-char-card">
                                    <h4>Persona Characteristics USA</h4>
                                    <div class="characteristics-list">
                                        <div class="char-item">
                                            <span class="char-label">Population</span>
                                            <span class="char-value" id="char-population">35,000</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Assets</span>
                                            <span class="char-value" id="char-assets">$200,000 - $800,000</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Debt</span>
                                            <span class="char-value" id="char-debt">$100,000 - $400,000</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Debt-to-Income Ratio</span>
                                            <span class="char-value" id="char-dti">32%</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Credit Score</span>
                                            <span class="char-value" id="char-credit">700 - 770</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Age Group</span>
                                            <span class="char-value" id="char-age">30 - 55</span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Monthly Spend</span>
                                            <span class="char-value" id="char-spend">$5,000 - $8,000</span>
                                        </div>
                                    </div>
                                </div>
                                <!-- State-specific Persona Characteristics (hidden by default) -->
                                <div class="characteristics-card hidden" id="state-char-card">
                                    <h4 id="state-char-title">Persona Characteristics</h4>
                                    <div class="characteristics-list">
                                        <div class="char-item">
                                            <span class="char-label">Population</span>
                                            <span class="char-value" id="state-char-population"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Assets</span>
                                            <span class="char-value" id="state-char-assets"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Debt</span>
                                            <span class="char-value" id="state-char-debt"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Debt-to-Income Ratio</span>
                                            <span class="char-value" id="state-char-dti"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Credit Score</span>
                                            <span class="char-value" id="state-char-credit"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Age Group</span>
                                            <span class="char-value" id="state-char-age"></span>
                                        </div>
                                        <div class="char-item">
                                            <span class="char-label">Monthly Spend</span>
                                            <span class="char-value" id="state-char-spend"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Products Owned -->
                            <div class="products-owned-card">
                                <h4>Products Owned</h4>
                                <div class="product-tags">
                                    <span class="product-tag">Mortgage</span>
                                    <span class="product-tag">Checking</span>
                                    <span class="product-tag">Home Insurance</span>
                                    <span class="product-tag">Credit Card</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="wizard-actions">
                        <button class="btn btn-outline" id="cancel-wizard">Cancel</button>
                        <button class="btn btn-primary" id="next-step">Review Products</button>
                    </div>
                </div>

                <!-- Step 2: Review Products -->
                <div class="wizard-step hidden" id="step-2">
                    <div class="products-review-grid">
                        <!-- Recommended Products -->
                        <div class="recommended-products">
                            <h4>Recommended Products</h4>
                            <div class="product-list">
                                <div class="product-item selected" data-product="heloc">
                                    <h5>HELOC</h5>
                                    <div class="product-details">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"/>
                                        </svg>
                                        <div>
                                            <span class="apr">7.99% APR</span>
                                            <span class="terms">7.81% for a $30k line</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-item" data-product="mortgage">
                                    <h5>Mortgage</h5>
                                    <div class="product-details">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"/>
                                        </svg>
                                        <div>
                                            <span class="apr">6.84% APR</span>
                                            <span class="terms">0-3.5% down payment</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-item" data-product="improvement">
                                    <h5>Improvement Loans</h5>
                                    <div class="product-details">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M22 9V7h-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2v-2h-2V9h2zm-4 10H4V5h14v14zm-7-7c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3z"/>
                                        </svg>
                                        <div>
                                            <span class="apr">6.49% APR</span>
                                            <span class="terms">$5k-$100k loans</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-item" data-product="insurance">
                                    <h5>Insurance</h5>
                                    <div class="product-details">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                        </svg>
                                        <div>
                                            <span class="apr">$97/month</span>
                                            <span class="terms">High-value coverage</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Scatter Chart Section -->
                        <div class="scatter-section">
                            <div class="scatter-chart-container" id="scatter-chart">
                                <!-- Tooltip: aparece al lado del punto con cÃ­rculo blanco centrado -->
                                <div class="scatter-tip" id="scatter-tip" aria-hidden="true">
                                    <div class="scatter-tip-dot"></div>
                                    <div class="scatter-tip-inner" id="scatter-tip-value">6320</div>
                                </div>

                                <svg id="scatter-svg" role="img" aria-label="Scatter plot: Explore Persona"></svg>
                            </div>

                            <div class="scatter-legend">
                                <span class="scatter-legend-dot"></span>
                                <span>Home Owners</span>
                            </div>

                            <div class="scatter-footer">
                                <div class="scatter-score">
                                    <span>Propensity Score</span>
                                    <strong id="propensity-value">80%</strong>
                                </div>

                                <div class="scatter-slider-wrap">
                                    <input id="propensity-slider" class="scatter-slider" type="range" min="0" max="100" value="80" />
                                    <div class="scatter-scale">
                                        <span>0%</span>
                                        <span>100%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Population Table -->
                    <div class="population-section">
                        <div class="population-header">
                            <h4>Population Overview</h4>
                            <span class="population-subtitle">Home Owners</span>
                            <div class="download-button-wrapper">
                                <button class="download-btn">
                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <table class="data-table population-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Home</th>
                                    <th>Mortgage</th>
                                    <th>Income</th>
                                    <th>Age</th>
                                    <th>Family Status</th>
                                    <th>Monthly Spend</th>
                                    <th>Credit Score</th>
                                    <th>Products Owned</th>
                                </tr>
                            </thead>
                            <tbody id="population-table-body">
                                <!-- Data populated by JS -->
                            </tbody>
                        </table>
                        <div class="table-footer">
                            <span class="segment-info">Persona Type Segment - Sample of 100 People</span>
                            <div class="pagination">
                                <button class="page-btn" id="prev-page">&larr; Previous</button>
                                <span class="page-number">1</span>
                                <span>...</span>
                                <button class="page-btn" id="next-page">Next &rarr;</button>
                            </div>
                        </div>
                    </div>

                    <div class="wizard-actions">
                        <button class="btn btn-outline" id="back-step">Cancel</button>
                        <button class="btn btn-primary" id="confirm-product">Confirm Product</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Success Modal -->
    <div class="modal" id="success-modal">
        <div class="modal-content">
            <div class="modal-icon success">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                </svg>
            </div>
            <h3>Campaign Created Successfully!</h3>
            <p>Your campaign has been created and is now active.</p>
            <button class="btn btn-primary" id="close-modal">Back to Campaign Studio</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
